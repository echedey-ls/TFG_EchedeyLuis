% -*-coding: utf-8 -*-
\documentclass[a4paper,11pt,openany]{book}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english,spanish,es-lcroman]{babel}
\usepackage{bookman}
\decimalpoint
\usepackage{graphicx}
\usepackage{amsfonts,amsgen,amsmath,amssymb}
\usepackage[top=3cm, bottom=3cm, right=2.54cm, left=2.54cm]{geometry}
\usepackage{afterpage}
\usepackage{colortbl,longtable}
\usepackage[
  pdftex,
  pdfauthor={\NombreAutor{}},
  pdftitle={Trabajo de Fin de Grado},
  pdfborder={0 0 0}
]{hyperref}
\usepackage{pdfpages}
\usepackage{url}
\usepackage[stable]{footmisc}
\usepackage{parskip} % para separar párrafos con espacio.

\usepackage{lscape}
\usepackage{pgfgantt}

% --- BIBLIOGRAPHY ---
\usepackage[
  backend=biber,
  style=numeric,
  sorting=none
]{biblatex}
\bibliography{bibliography}
\usepackage{csquotes}
% --- BIBLIOGRAPHY ---

\usepackage{float}
\usepackage{subfigure}

%%-----------------------------------------------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\setlength{\headheight}{1.5\headheight}
\setlength{\parindent}{1cm}
\cfoot{\thepage}

\addto\captionsspanish{ \renewcommand{\contentsname}
  {Índice general} }
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\newcommand{\bigrule}{\titlerule[0.5mm]}

\usepackage{appendix}
\renewcommand{\appendixname}{Anexos}
\renewcommand{\appendixtocname}{Anexos}
\renewcommand{\appendixpagename}{}
%%-----------------------------------------------
%% Páginas en blanco sin cabecera:
%%-----------------------------------------------
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}

\def\clearpage{
  \ifvmode
  \ifnum \@dbltopnum =\m@ne
  \ifdim \pagetotal <\topskip
  \hbox{}
  \fi
  \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother
%%-----------------------------------------------
%% Estilos código de lenguajes: Consola, C, C++ y Python
%%-----------------------------------------------
\usepackage{color}

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

\usepackage{listings}
\lstset{ frame=Ltb,
  framerule=0pt,
  aboveskip=0.5cm,
  framextopmargin=3pt,
  framexbottommargin=3pt,
  framexleftmargin=0.4cm,
  framesep=0pt,
  rulesep=.0pt,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  %
  stringstyle=\ttfamily,
  showstringspaces = false,
  basicstyle=\scriptsize\ttfamily,
  commentstyle=\color{gray45},
  keywordstyle=\bfseries,
  %
  numbers=left,
  numbersep=6pt,
  numberstyle=\tiny,
  numberfirstline = false,
  breaklines=true,
}

% Puedes añadir más lenguajes siguiendo un estilo similar al de Python,
% o hacerte tu propio estilo.
% Enlace con alguna ayudita: www.overleaf.com/learn/latex/Code_listing
\lstnewenvironment{listing}[1][]
                  {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}
                    \lstdefinestyle{consola}{
                                    basicstyle=\scriptsize\bf\ttfamily,
                                    backgroundcolor=\color{gray97}}
                    \lstdefinestyle{C}{
                                    basicstyle=\scriptsize,
                                    frame=single,
                                    language=C,
                                    numbers=left}
                    \lstdefinestyle{C++}{
                                    basicstyle=\small,
                                    frame=single,
                                    backgroundcolor=\color{gray75},
                                    language=C++,
                                    numbers=left}
                    \lstdefinestyle{Python}{
                                    basicstyle=\small,
                                    frame=single,
                                    backgroundcolor=\color{gray75},
                                    language=Python,
                                    numbers=left}
                    \lstdefinestyle{bash}{
                                    basicstyle=\small,
                                    frame=single,
                                    backgroundcolor=\color{gray75},
                                    language=bash,
                                    numbers=left}
                                \makeatother

% Custom link command
% https://tex.stackexchange.com/questions/121865/nameref-how-to-display-section-name-and-its-number
\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}}

% Custom commands for linking GitHub issues, pull requests and discussions of the pvlib python library
\newcommand{\pvlibRepoLink}{https://github.com/pvlib/pvlib-python}
% Issue
\newcommand{\issue}[2][\pvlibRepoLink]{\href{#1/issues/#2}{\textit{Issue:} \texttt{\##2}}}
% Pull Request
\newcommand{\pr}[2][\pvlibRepoLink]{\href{#1/pulls/#2}{\textit{Pull Request:} \texttt{\##2}}}
% Discussion
\newcommand{\discussion}[2][\pvlibRepoLink]{\href{#1/discussions/}{\textit{Discussion:} \texttt{\##2}}}

% Custom commands for linking the documentation of the pvlib python library
\newcommand{\pvlibDocsLink}{https://pvlib-python.readthedocs.io/en/latest}
\newcommand{\linkDocsFunction}[2][\pvlibDocsLink]{\href{{#1}/reference/generated/{#2}.html}{\texttt{#2}}}
